<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.example.dao.StudentDao">

    <!--
    sql æ˜ å°„æ–‡ä»¶ï¼šå†™sqlè¯­å¥çš„ï¼Œmybatisä¼šæ‰§è¡Œè¿™äº›sql
    1.æŒ‡å®šçº¦æŸæ–‡ä»¶
    <!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

       mybatis-3-mapper.dtd æ˜¯çº¦æŸæ–‡ä»¶çš„åç§°ï¼Œæ‰©å±•åæ˜¯dtdçš„ã€‚

    2.çº¦æŸæ–‡ä»¶ä½œç”¨ï¼šé™åˆ¶ï¼Œæ£€æŸ¥åœ¨å½“å‰æ–‡ä»¶ä¸­å‡ºç°çš„æ ‡ç­¾ï¼Œå±æ€§å¿…é¡»ç¬¦åˆmybatisçš„è¦æ±‚ã€‚
    3.mapper æ˜¯å½“å‰æ–‡ä»¶çš„æ ¹æ ‡ç­¾ï¼Œå¿…é¡»çš„
       è¦æ±‚ä½¿ç”¨daoæ¥å£çš„å…¨é™å®šåç§°
    4.ç‰¹å®šæ ‡ç­¾ è¡¨ç¤ºæ•°æ®åº“æ“ä½œ
        <select>
        <update>
        <insert>
        <delete>
    -->

    <!--
    select:è¡¨ç¤ºæŸ¥è¯¢æ“ä½œ
    id:æ‰§è¡Œè¯¥sqlçš„å”¯ä¸€æ ‡è¯†,å¯ä»¥è‡ªå®šä¹‰ï¼Œä½†ä¸æ¨è
    resultType:è¡¨ç¤ºç»“æœé›†ç±»å‹ï¼Œjavaå¯¹è±¡çš„å…¨é™å®šåç§°ã€‚ ç›¸å½“äº åº”è¯¥ ç”Ÿæˆäº†javaæ–‡ä»¶ï¼Œç›´æ¥ å¯¼åŒ… çš„æ¨¡å¼æŠŠ æš‚æ—¶æ˜¯è¿™æ ·ç†è§£çš„
    -->


    <select id="selectAll" resultType="org.example.entity.Student">
        select *
        from student
    </select>

    <insert id="insertStudent">
        insert into students
        values (#{id}, #{name}, #{email}, #{age})
    </insert>

    <!--
    parameterType:daoæ¥å£ä¸­æ–¹æ³•å‚æ•°çš„æ•°æ®ç±»å‹ã€‚
    parameterTypeå®ƒçš„å€¼æ˜¯javaçš„æ•°æ®ç±»å‹å…¨é™å®šåç§°æˆ–è€…æ˜¯ mybatiså®šä¹‰çš„åˆ«åâ€”â€”å‚è€ƒ noteç¬”è®°
    eg: parameterType = "java.lang.Integer" //å…¨é™å®šå
        parameterType = "int" //åˆ«å
    æˆ–è€…æ˜¯ ä¸å†™ğŸ™…â€
    parameterType ,mybatiså¯ä»¥é€šè¿‡åå°„æœºåˆ¶èƒ½å¤Ÿè·å– æ¥å£å‚æ•°çš„ç±»å‹

    -->
    <select id="selectById" resultType="org.example.entity.Student">
        select id, name, email, age
        from student
        where id = #{paramId}
    </select>

    <select id="å¤šä¸ªå‚æ•°æŸ¥è¯¢_Paramæ³¨è§£" resultType="org.example.entity.Student">
        select id, name, email, age
        from student
        where id = #{paramId}
           or name = #{paramName}
    </select>
    <!--
    å¤šä¸ªå‚æ•°,ä½¿ç”¨javaå¯¹è±¡çš„å±æ€§å€¼,ä½œä¸ºå‚æ•°å®é™…å€¼
    ä½¿ç”¨å¯¹è±¡è¯­æ³•:#{å±æ€§å, javaType=ç±»å‹åç§°,jdbcType=æ•°æ®ç±»å‹}å¾ˆå°‘ç”¨
    javaType:æŒ‡javaä¸­çš„å±æ€§æ•°æ®ç±»å‹ã€‚ jdbcType:åœ¨æ•°æ®åº“ä¸­çš„æ•°æ®ç±»å‹ã€‚

    ğŸŒŸæˆ‘ä»¬ä½¿ç”¨çš„ç®€åŒ–æ–¹å¼: #{å±æ€§å}, javaType, jdbcTypesçš„å€¼ mybatisåå°„èƒ½è·å–ã€‚ä¸ç”¨æä¾›

    -->
    <select id="å¤šä¸ªå‚æ•°æŸ¥è¯¢_å‚æ•°å¯¹è±¡" resultType="org.example.entity.Student">
        select id, name, email, age
        from student
        where id = #{paramId,javaType=java.lang.Integer,jdbcType=INTEGER}
           or name = #{paramName,javaType=java.lang.String,jdbcType=VARCHAR}
    </select>

    <select id="å¤šä¸ªå‚æ•°æŸ¥è¯¢_æŒ‰ä½ç½®" resultType="org.example.entity.Student">
        select id, name, email, age
        from student
        where id = #{arg0}
           or name = #{arg1}
    </select>
    <!--
    #{key}
    -->
    <select id="å¤šä¸ªå‚æ•°æŸ¥è¯¢_Mapé›†åˆ" resultType="org.example.entity.Student">
        select id, name, email, ages
        from student
        where id = #{paramId}
           or name = #{paramName}
    </select>

    <!--
    select * from student where age = '22' and email like concat('%','@qq.com') ORDER BY name DESC
    åªè¦æ˜¯sqlä¸­éœ€è¦æ·»åŠ ''çš„åœ°æ–¹éƒ½éœ€è¦ æ·»åŠ ''
    -->
    <select id="é€šè¿‡$æ¥æ”¶å‚æ•°æ’åº" resultType="org.example.entity.Student">
        select *
        from student
        where age = ${age}
          and email like concat('%', '${lastEmail}')
        ORDER BY ${columnName} DESC
    </select>
    <!--
    åœ¨mybatis.xml ä¸­é…ç½®
    <typeAlias type="org.example.entity.Student" alias="student">
    -->
    <select id="åˆ«åçš„ä½¿ç”¨" resultType="student">
        select *
        from student
    </select>

    <select id="resultType_Map" resultType="java.util.HashMap">
        select id as selfId, name, email
        from student
    </select>


    <!--â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”startâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-->
    <!--å®šä¹‰resultMap
    id:è‡ªå®šä¹‰åç§° ,id æ˜¯å¯é‡å¤ä½¿ç”¨çš„
    typeï¼šjavaå¯¹è±¡çš„å…¨é™å®šåç§°
    -->
    <resultMap id="id1" type="org.example.entity.Student">
        <!--åˆ—åå’Œjavaå±æ€§çš„å…³ç³»-->
        <!--
        ä¸»é”®åˆ—,ä½¿ç”¨idæ ‡ç­¾
        column:åˆ—å
        property:javaå¯¹è±¡çš„å±æ€§å ã€ä¸åŒºåˆ†å¤§å°å†™ã€‘
        -->

        <id column="id" property="id"/>

        <!--éä¸»é”®åˆ—ï¼Œä½¿ç”¨result -->
        <result column="name" property="name"></result>
        <result column="email" property="email"></result>
        <result column="age" property="age"></result>

    </resultMap>

    <select id="resultMap" resultMap="id1">
        select *
        from student
    </select>
    <!--â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”endâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-->

    <select id="Likeæ¨¡ç³ŠæŸ¥è¯¢_1javaä»£ç æŒ‡å®š" resultType="org.example.entity.Student">
        select *
        from student
        where email like #{lastEmail}
    </select>
    <select id="Likeæ¨¡ç³ŠæŸ¥è¯¢_2mapperæ–‡ä»¶æ‹¼æ¥" resultType="org.example.entity.Student">
        select *
        from student
        where email like "%" #{lastEmail} "%"
        <!--"%" å­—ç¬¦ä¸²ç›´æ¥æœ€å¥½åŠ  ç©ºæ ¼ï¼Œå› ä¸º mysqlä¸­éœ€è¦ç©ºæ ¼ï¼Œå¦åˆ™æŠ¥é”™ï¼Œè™½ç„¶è¿™é‡Œå¯ä»¥ä¸éœ€è¦ï¼Œä½†æ˜¯æ²¡å¿…è¦è‡ªæ‰¾éº»çƒ¦-->
    </select>


</mapper>